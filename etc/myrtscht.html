<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>~/Perl/Myrtscht/myrtscht.html</title>
<meta name="Generator" content="Vim/7.1">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body bgcolor="#ffffff" text="#000000"><font face="monospace">
<font color="#8b0000">&nbsp;&nbsp;1 </font><font color="#c000c0">#!/usr/bin/perl</font><br>
<font color="#8b0000">&nbsp;&nbsp;2 </font><br>
<font color="#8b0000">&nbsp;&nbsp;3 </font><font color="#0000c0"># all the nice modules</font><br>
<font color="#8b0000">&nbsp;&nbsp;4 </font><font color="#8b0000">use strict</font>;<br>
<font color="#8b0000">&nbsp;&nbsp;5 </font><font color="#8b0000">use </font>Log::Log4perl <font color="#c00000">qw/</font><font color="#c00000">&nbsp;:easy </font><font color="#c00000">/</font>;<br>
<font color="#8b0000">&nbsp;&nbsp;6 </font><font color="#8b0000">use </font>Cwd;<br>
<font color="#8b0000">&nbsp;&nbsp;7 </font><font color="#8b0000">use </font>File::Spec;<br>
<font color="#8b0000">&nbsp;&nbsp;8 </font><font color="#8b0000">use </font>Getopt::Long <font color="#c00000">qw/</font><font color="#c00000">&nbsp;:config no_ignore_case bundling </font><font color="#c00000">/</font>;<br>
<font color="#8b0000">&nbsp;&nbsp;9 </font><font color="#8b0000">use </font>Games::Tournament::RoundRobin;<br>
<font color="#8b0000">&nbsp;10 </font><font color="#8b0000">use </font>Net::CUPS;<br>
<font color="#8b0000">&nbsp;11 </font><font color="#8b0000">use </font>Net::CUPS::Destination;<br>
<font color="#8b0000">&nbsp;12 </font><br>
<font color="#8b0000">&nbsp;13 </font><font color="#0000c0"># set up all the nice options</font><br>
<font color="#8b0000">&nbsp;14 </font><font color="#8b0000">our</font>&nbsp;<font color="#008080">%Options</font>;<br>
<font color="#8b0000">&nbsp;15 </font>GetOptions(<br>
<font color="#8b0000">&nbsp;16 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">'</font><font color="#c00000">s</font><font color="#c00000">'</font>&nbsp;&nbsp; =&gt; <font color="#008080">\$Options</font>{s},<br>
<font color="#8b0000">&nbsp;17 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">'</font><font color="#c00000">a</font><font color="#c00000">'</font>&nbsp;&nbsp; =&gt; <font color="#008080">\$Options</font>{a},<br>
<font color="#8b0000">&nbsp;18 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">'</font><font color="#c00000">p</font><font color="#c00000">'</font>&nbsp;&nbsp; =&gt; <font color="#008080">\$Options</font>{p},<br>
<font color="#8b0000">&nbsp;19 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">'</font><font color="#c00000">b:s</font><font color="#c00000">'</font>&nbsp;=&gt; <font color="#008080">\$Options</font>{b},<br>
<font color="#8b0000">&nbsp;20 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">'</font><font color="#c00000">r:s</font><font color="#c00000">'</font>&nbsp;=&gt; <font color="#008080">\$Options</font>{r},<br>
<font color="#8b0000">&nbsp;21 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">'</font><font color="#c00000">g:s</font><font color="#c00000">'</font>&nbsp;=&gt; <font color="#008080">\$Options</font>{g},<br>
<font color="#8b0000">&nbsp;22 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">'</font><font color="#c00000">n:s</font><font color="#c00000">'</font>&nbsp;=&gt; <font color="#008080">\$Options</font>{n},<br>
<font color="#8b0000">&nbsp;23 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">'</font><font color="#c00000">d:s</font><font color="#c00000">'</font>&nbsp;=&gt; <font color="#008080">\$Options</font>{d},<br>
<font color="#8b0000">&nbsp;24 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">'</font><font color="#c00000">P:s</font><font color="#c00000">'</font>&nbsp;=&gt; <font color="#008080">\$Options</font>{P},<br>
<font color="#8b0000">&nbsp;25 </font>);<br>
<font color="#8b0000">&nbsp;26 </font><br>
<font color="#8b0000">&nbsp;27 </font><font color="#0000c0"># set up some general variables</font><br>
<font color="#8b0000">&nbsp;28 </font><font color="#8b0000">my</font>&nbsp;<font color="#008080">$Etcpath</font>&nbsp;= File::Spec-&gt;catfile(<br>
<font color="#8b0000">&nbsp;29 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File::Spec-&gt;rootdir(),<br>
<font color="#8b0000">&nbsp;30 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">qw/</font><font color="#c00000">&nbsp;home moses Perl Myrtscht etc </font><font color="#c00000">/</font>);<br>
<font color="#8b0000">&nbsp;31 </font><br>
<font color="#8b0000">&nbsp;32 </font><font color="#0000c0"># initialize the logger or not</font><br>
<font color="#8b0000">&nbsp;33 </font><font color="#8b0000">if</font>&nbsp;(<font color="#8b0000">defined</font>&nbsp;<font color="#008080">$Options</font>{d}) {<br>
<font color="#8b0000">&nbsp;34 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$cwd</font>&nbsp;= getcwd()<br>
<font color="#8b0000">&nbsp;35 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't get the current working directory: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">&nbsp;36 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$logfile</font>&nbsp;=<br>
<font color="#8b0000">&nbsp;37 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$Options</font>{d} ?<br>
<font color="#8b0000">&nbsp;38 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File::Spec-&gt;catfile(<font color="#008080">$cwd</font>, <font color="#008080">$Options</font>{d}) :<br>
<font color="#8b0000">&nbsp;39 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File::Spec-&gt;catfile(<font color="#008080">$Etcpath</font>, <font color="#c00000">'</font><font color="#c00000">log.conf</font><font color="#c00000">'</font>);<br>
<font color="#8b0000">&nbsp;40 </font>&nbsp;&nbsp;&nbsp;&nbsp;Log::Log4perl-&gt;init(<font color="#008080">$logfile</font>);<br>
<font color="#8b0000">&nbsp;41 </font>}<br>
<font color="#8b0000">&nbsp;42 </font>INFO&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Initialized.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">&nbsp;43 </font><br>
<font color="#8b0000">&nbsp;44 </font><font color="#0000c0"># little debbugging help</font><br>
<font color="#8b0000">&nbsp;45 </font><font color="#8b0000">foreach</font>&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$option</font>&nbsp;(<font color="#8b0000">keys</font>&nbsp;<font color="#008080">%Options</font>) {<br>
<font color="#8b0000">&nbsp;46 </font>&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Set option </font><font color="#008080">$option</font><font color="#c00000">&nbsp;to </font><font color="#008080">$Options</font><font color="#c00000">{</font><font color="#008080">$option</font><font color="#c00000">}.</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">&nbsp;47 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">if</font>&nbsp;<font color="#8b0000">defined</font>&nbsp;<font color="#008080">$Options</font>{<font color="#008080">$option</font>};<br>
<font color="#8b0000">&nbsp;48 </font>}<br>
<font color="#8b0000">&nbsp;49 </font><br>
<font color="#8b0000">&nbsp;50 </font><font color="#0000c0"># invoke the subroutines corresponding to the options</font><br>
<font color="#8b0000">&nbsp;51 </font><font color="#8b0000">if</font>&nbsp;(<font color="#8b0000">defined</font>&nbsp;<font color="#008080">$Options</font>{n}) {<br>
<font color="#8b0000">&nbsp;52 </font>&nbsp;&nbsp;&nbsp;&nbsp;INFO&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Invoking subroutine to create new tournament.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">&nbsp;53 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">&amp;create_new_tournament</font>(<font color="#008080">\$Etcpath</font>, <font color="#008080">\%Options</font>, <font color="#008080">\@ARGV</font>);<br>
<font color="#8b0000">&nbsp;54 </font>} <font color="#8b0000">elsif</font>&nbsp;(<font color="#8b0000">defined</font>&nbsp;<font color="#008080">$Options</font>{p}) {<br>
<font color="#8b0000">&nbsp;55 </font>&nbsp;&nbsp;&nbsp;&nbsp;INFO&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Invoking subroutine to process the group files.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">&nbsp;56 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">&amp;process_group_files</font>(<font color="#008080">\$Etcpath</font>, <font color="#008080">\%Options</font>, <font color="#008080">\@ARGV</font>);<br>
<font color="#8b0000">&nbsp;57 </font>} <font color="#8b0000">elsif</font>&nbsp;(<font color="#8b0000">defined</font>&nbsp;<font color="#008080">$Options</font>{a}) {<br>
<font color="#8b0000">&nbsp;58 </font>&nbsp;&nbsp;&nbsp;&nbsp;INFO&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Invoking subroutine to preprocess the game files.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">&nbsp;59 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">&amp;preprocess_game_files</font>(<font color="#008080">\$Etcpath</font>, <font color="#008080">\%Options</font>, <font color="#008080">\@ARGV</font>);<br>
<font color="#8b0000">&nbsp;60 </font>}<br>
<font color="#8b0000">&nbsp;61 </font><br>
<font color="#8b0000">&nbsp;62 </font><font color="#0000c0"># the subroutine invoked if the option -n is defined</font><br>
<font color="#8b0000">&nbsp;63 </font><font color="#8b0000">sub</font><font color="#008080">&nbsp;</font><font color="#008080">create_new_tournament</font><font color="#008080">&nbsp;</font>{<br>
<font color="#8b0000">&nbsp;64 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$etcpath</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">&nbsp;65 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$options</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">&nbsp;66 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$specified_groupfnames</font>&nbsp;= <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">&nbsp;67 </font><br>
<font color="#8b0000">&nbsp;68 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># creating the directory in which the tournament is stored</font><br>
<font color="#8b0000">&nbsp;69 </font>&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<font color="#8b0000">&nbsp;70 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">@date</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = (<font color="#8b0000">localtime</font>)[<font color="#c00000">4</font>,<font color="#c00000">3</font>,<font color="#c00000">5</font>];<br>
<font color="#8b0000">&nbsp;71 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$tournam_dir</font>&nbsp;= <br>
<font color="#8b0000">&nbsp;72 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$options</font>-&gt;{n} || <font color="#8b0000">sprintf</font>(<br>
<font color="#8b0000">&nbsp;73 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Tournament-%02d%02d%d</font><font color="#c00000">&quot;</font>,<br>
<font color="#8b0000">&nbsp;74 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">map</font>(<font color="#008080">$_</font>&nbsp;+ <font color="#c00000">1</font>,&nbsp;&nbsp;<font color="#008080">@date</font>[<font color="#c00000">0</font>,<font color="#c00000">1</font>]),<br>
<font color="#8b0000">&nbsp;75 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$date</font>[<font color="#c00000">2</font>] + <font color="#c00000">1900</font>);<br>
<font color="#8b0000">&nbsp;76 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">mkdir</font>(<font color="#008080">$tournam_dir</font>, <font color="#c00000">0755</font>)<br>
<font color="#8b0000">&nbsp;77 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't make directory </font><font color="#008080">$tournam_dir</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">&nbsp;78 </font>&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Generated new tournament directory: </font><font color="#008080">$tournam_dir</font><font color="#c00000">.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">&nbsp;79 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">chdir</font>&nbsp;<font color="#008080">$tournam_dir</font><br>
<font color="#8b0000">&nbsp;80 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't change into directory </font><font color="#008080">$tournam_dir</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">&nbsp;81 </font>&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Changed into directory </font><font color="#008080">$tournam_dir</font><font color="#c00000">.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">&nbsp;82 </font>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">&nbsp;83 </font>&nbsp;&nbsp; <br>
<font color="#8b0000">&nbsp;84 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># write the group template into all the group files</font><br>
<font color="#8b0000">&nbsp;85 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">if</font>&nbsp;(<font color="#008080">$options</font>-&gt;{g} <font color="#8b0000">or</font>&nbsp;!<font color="#8b0000">defined</font>&nbsp;<font color="#008080">$options</font>-&gt;{g}) {<br>
<font color="#8b0000">&nbsp;86 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$groupnr</font>&nbsp;= <font color="#008080">$options</font>-&gt;{g} || <font color="#c00000">10</font>;<br>
<font color="#8b0000">&nbsp;87 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">@groupfiles</font>;<br>
<font color="#8b0000">&nbsp;88 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">for</font>&nbsp;(<font color="#8b0000">my</font>&nbsp;<font color="#008080">$i</font>&nbsp;= <font color="#c00000">1</font>; <font color="#008080">$i</font>&nbsp;&lt;= <font color="#008080">$groupnr</font>; <font color="#008080">$i</font>++) {<br>
<font color="#8b0000">&nbsp;89 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">push</font>(<font color="#008080">@groupfiles</font>, <font color="#8b0000">sprintf</font>(<font color="#c00000">&quot;</font><font color="#c00000">%02d.g</font><font color="#c00000">&quot;</font>, <font color="#008080">$i</font>));<br>
<font color="#8b0000">&nbsp;90 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">&nbsp;91 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">&amp;create_groupfiles</font>(<font color="#008080">$etcpath</font>, <font color="#008080">\@groupfiles</font>);<br>
<font color="#8b0000">&nbsp;92 </font>&nbsp;&nbsp;&nbsp;&nbsp;} <font color="#8b0000">else</font>&nbsp;{<br>
<font color="#8b0000">&nbsp;93 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">&amp;create_groupfiles</font>(<font color="#008080">$etcpath</font>, <font color="#008080">$specified_groupfnames</font>);<br>
<font color="#8b0000">&nbsp;94 </font>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">&nbsp;95 </font>&nbsp;&nbsp;&nbsp;&nbsp;INFO&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Created the group files.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">&nbsp;96 </font>}<br>
<font color="#8b0000">&nbsp;97 </font><br>
<font color="#8b0000">&nbsp;98 </font><font color="#0000c0"># the subroutine invoked if the option -p is defined</font><br>
<font color="#8b0000">&nbsp;99 </font><font color="#8b0000">sub</font><font color="#008080">&nbsp;</font><font color="#008080">process_group_files</font><font color="#008080">&nbsp;</font>{<br>
<font color="#8b0000">100 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$etcpath</font>&nbsp;&nbsp;&nbsp;&nbsp;= <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">101 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$options</font>&nbsp;&nbsp;&nbsp;&nbsp;= <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">102 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$groupfiles</font>&nbsp;= <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">103 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$cwd</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= getcwd;<br>
<font color="#8b0000">104 </font><br>
<font color="#8b0000">105 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># We have to compute some things therewith the printout looks</font><br>
<font color="#8b0000">106 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># nice later.</font><br>
<font color="#8b0000">107 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># The number of lines per sheet of A4 paper must be 67 and 67</font><br>
<font color="#8b0000">108 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># must be the number of lines per sheet of A4 paper as thou have</font><br>
<font color="#8b0000">109 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># to use A4 paper with a number of 13 chars per column to get </font><br>
<font color="#8b0000">110 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># nice results.</font><br>
<font color="#8b0000">111 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$maxsetnr</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= (<font color="#008080">$options</font>-&gt;{r} || <font color="#c00000">2</font>) * <font color="#c00000">2</font>&nbsp;- <font color="#c00000">1</font>;<br>
<font color="#8b0000">112 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$gamesheetheigth</font>&nbsp;= <font color="#008080">$maxsetnr</font>&nbsp;+ <font color="#c00000">6</font>;<br>
<font color="#8b0000">113 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$gamesheets</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <font color="#8b0000">sprintf</font>(<font color="#c00000">&quot;</font><font color="#c00000">%d</font><font color="#c00000">&quot;</font>, <font color="#c00000">67</font>&nbsp;/ <font color="#008080">$gamesheetheigth</font>);<br>
<font color="#8b0000">114 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$newlines</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <font color="#c00000">67</font>&nbsp;- <font color="#008080">$gamesheets</font>&nbsp;* <font color="#008080">$gamesheetheigth</font>;<br>
<font color="#8b0000">115 </font>&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">There will be </font><font color="#008080">$gamesheets</font><font color="#c00000">&nbsp;per page, so we have to insert </font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">116 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">&quot;</font><font color="#008080">$newlines</font><font color="#c00000">&nbsp;newlines after them. They are </font><font color="#008080">$gamesheetheigth</font><font color="#c00000">&nbsp;</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">117 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">&quot;</font><font color="#c00000">lines high.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">118 </font><br>
<font color="#8b0000">119 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># the format for the printout; Alas, I can't declare the</font><br>
<font color="#8b0000">120 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># variables in a smaller scope.</font><br>
<font color="#8b0000">121 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>(<font color="#008080">$groupname</font>, <font color="#008080">$member1</font>, <font color="#008080">$id</font>, <font color="#008080">$table</font>, <font color="#008080">$member2</font>, <font color="#008080">$roundcnt</font>);<br>
<font color="#8b0000">122 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$printoutform</font>&nbsp;= <br>
<font color="#8b0000">123 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">format GAMEPRINT = </font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">124 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">'</font><font color="#c00000">Group: @</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">&lt;</font><font color="#c00000">'</font>&nbsp;x <font color="#c00000">36</font>&nbsp;. <font color="#c00000">&quot;</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">125 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">'</font><font color="#c00000">$groupname</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">&quot;</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">126 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">'</font><font color="#c00000">Round: @&lt;&lt;&lt;&lt; Table: @&lt;&lt;&lt;&lt;</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">&nbsp;</font><font color="#c00000">'</font>&nbsp;x <font color="#c00000">10</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">ID: @&lt;&lt;&lt;&lt;</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">&quot;</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">127 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">'</font><font color="#c00000">$roundcnt, $table, $id</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">&quot;</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">128 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">'</font><font color="#c00000">-</font><font color="#c00000">'</font>&nbsp;x <font color="#c00000">22</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">+</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">-</font><font color="#c00000">'</font>&nbsp;x <font color="#c00000">21</font>&nbsp;. <font color="#c00000">&quot;</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">129 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">'</font><font color="#c00000">@</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">|</font><font color="#c00000">'</font>&nbsp;x <font color="#c00000">20</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">&nbsp;|</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">@</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">|</font><font color="#c00000">'</font>&nbsp;x <font color="#c00000">20</font>&nbsp;. <font color="#c00000">&quot;</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">130 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">'</font><font color="#c00000">$member1, $member2</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">&quot;</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">131 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">'</font><font color="#c00000">-</font><font color="#c00000">'</font>&nbsp;&nbsp;x <font color="#c00000">22</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">+</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">-</font><font color="#c00000">'</font>&nbsp;x <font color="#c00000">21</font>&nbsp;. <font color="#c00000">&quot;</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">132 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. (<font color="#c00000">'</font><font color="#c00000">&nbsp;</font><font color="#c00000">'</font>&nbsp;x <font color="#c00000">22</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">|</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">&nbsp;</font><font color="#c00000">'</font>&nbsp;x <font color="#c00000">21</font>&nbsp;. <font color="#c00000">&quot;</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>) x <font color="#008080">$maxsetnr</font><br>
<font color="#8b0000">133 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">'</font><font color="#c00000">-</font><font color="#c00000">'</font>&nbsp;&nbsp;x <font color="#c00000">22</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">+</font><font color="#c00000">'</font>&nbsp;. <font color="#c00000">'</font><font color="#c00000">-</font><font color="#c00000">'</font>&nbsp;x <font color="#c00000">21</font>&nbsp;. <font color="#c00000">&quot;</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">134 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">&quot;</font><font color="#c00000">.</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">135 </font>&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#008080">$printoutform</font>&nbsp;<font color="#8b0000">if</font>&nbsp;<font color="#8b0000">defined</font>&nbsp;<font color="#008080">$options</font>-&gt;{d};<br>
<font color="#8b0000">136 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">eval</font>&nbsp;<font color="#008080">$printoutform</font>;<br>
<font color="#8b0000">137 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#008080">$@</font>&nbsp;<font color="#8b0000">if</font>&nbsp;<font color="#008080">$@</font>;<br>
<font color="#8b0000">138 </font><br>
<font color="#8b0000">139 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># process the group files one by one</font><br>
<font color="#8b0000">140 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">foreach</font>&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$groupfile</font>&nbsp;(<font color="#008080">@$groupfiles</font>) {<br>
<font color="#8b0000">141 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$printfile</font>&nbsp;= <font color="#c00000">&quot;</font><font color="#c00000">gamesheets</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">142 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$groupfnr</font>&nbsp;= <font color="#8b0000">substr</font>(<font color="#008080">$groupfile</font>, <font color="#c00000">0</font>, <font color="#c00000">2</font>);<br>
<font color="#8b0000">143 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$printer</font>;<br>
<font color="#8b0000">144 </font><br>
<font color="#8b0000">145 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># manage the group directory</font><br>
<font color="#8b0000">146 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<font color="#8b0000">147 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$groupdir</font>&nbsp;= <font color="#008080">$groupfnr</font>&nbsp;. <font color="#c00000">&quot;</font><font color="#c00000">.d</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">148 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">mkdir</font>(<font color="#008080">$groupdir</font>, <font color="#c00000">0755</font>)<br>
<font color="#8b0000">149 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't make directory </font><font color="#008080">$groupdir</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">150 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">rename</font>(<font color="#008080">$groupfile</font>, File::Spec-&gt;catfile(<font color="#008080">$groupdir</font>, <font color="#008080">$groupfile</font>))<br>
<font color="#8b0000">151 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't move </font><font color="#008080">$groupfile</font><font color="#c00000">&nbsp;to </font><font color="#008080">$groupdir</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">152 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">chdir</font>&nbsp;<font color="#008080">$groupdir</font><br>
<font color="#8b0000">153 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't change into </font><font color="#008080">$groupdir</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">154 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Now in group directory </font><font color="#008080">$groupdir</font><font color="#c00000">.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">155 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">156 </font><br>
<font color="#8b0000">157 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># read the groupfile</font><br>
<font color="#8b0000">158 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">open</font>(<font color="#008080">GROUPFILE</font>, <font color="#c00000">&quot;</font><font color="#c00000">&lt;</font><font color="#c00000">&quot;</font>, <font color="#008080">$groupfile</font>)<br>
<font color="#8b0000">159 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't open group file </font><font color="#008080">$groupfile</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">160 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">chomp</font>(<font color="#8b0000">my</font>&nbsp;<font color="#008080">@gf_content</font>&nbsp;= <font color="#008080">&lt;GROUPFILE&gt;</font>);<br>
<font color="#8b0000">161 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">close</font>&nbsp;<font color="#008080">GROUPFILE</font>;<br>
<font color="#8b0000">162 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Group file content: </font><font color="#008080">@gf_content</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">163 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$groupname</font>&nbsp;&nbsp;= <font color="#8b0000">substr</font>(<font color="#8b0000">shift</font>&nbsp;<font color="#008080">@gf_content</font>, <font color="#c00000">6</font>);<br>
<font color="#8b0000">164 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">The group is named </font><font color="#008080">$groupname</font><font color="#c00000">.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">165 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">@tables</font>&nbsp;&nbsp;= <font color="#8b0000">split</font>(m([ ,;.:/]+), <font color="#8b0000">substr</font>(<font color="#8b0000">shift</font>&nbsp;<font color="#008080">@gf_content</font>, <font color="#c00000">8</font>));<br>
<font color="#8b0000">166 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">It plays at the tables </font><font color="#008080">@tables</font><font color="#c00000">.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">167 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">shift</font>&nbsp;<font color="#008080">@gf_content</font>;<br>
<font color="#8b0000">168 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">@members</font>&nbsp;= <font color="#008080">@gf_content</font>;<br>
<font color="#8b0000">169 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">It consists of </font><font color="#008080">@members</font><font color="#c00000">.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">170 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">undef</font>&nbsp;<font color="#008080">@gf_content</font>;<br>
<font color="#8b0000">171 </font><br>
<font color="#8b0000">172 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># initialize the printing things</font><br>
<font color="#8b0000">173 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># invoke the spooler or not</font><br>
<font color="#8b0000">174 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">unless</font>&nbsp;(<font color="#8b0000">defined</font>&nbsp;<font color="#008080">$options</font>-&gt;{s}) {<br>
<font color="#8b0000">175 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$cups</font>&nbsp;= Net::CUPS-&gt;<font color="#8b0000">new</font>()<br>
<font color="#8b0000">176 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">warn</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't get a nice CUPS - we </font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">177 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">&quot;</font><font color="#c00000">won't be able to print.</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">178 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$printer</font>&nbsp;= <font color="#008080">$cups</font>-&gt;getDestination(<font color="#008080">$options</font>-&gt;{P})<br>
<font color="#8b0000">179 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">warn</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't get your printer's destination: </font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">180 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">&quot;</font><font color="#c00000">You have to specify another.</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">181 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$printer</font>-&gt;addOption(<font color="#c00000">&quot;</font><font color="#c00000">cpi</font><font color="#c00000">&quot;</font>, <font color="#c00000">13</font>);<br>
<font color="#8b0000">182 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$printer</font>-&gt;addOption(<font color="#c00000">&quot;</font><font color="#c00000">columns</font><font color="#c00000">&quot;</font>, <font color="#c00000">2</font>);<br>
<font color="#8b0000">183 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br>
<font color="#8b0000">184 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">open</font>(<font color="#008080">GAMEPRINT</font>, <font color="#c00000">&quot;</font><font color="#c00000">&gt;&gt;</font><font color="#c00000">&quot;</font>, <font color="#008080">$printfile</font>)<br>
<font color="#8b0000">185 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't open </font><font color="#008080">$printfile</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">186 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">select</font>((<font color="#8b0000">select</font>(<font color="#008080">GAMEPRINT</font>), <font color="#008080">$|</font>++)[<font color="#c00000">0</font>]);<br>
<font color="#8b0000">187 </font><br>
<font color="#8b0000">188 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># create the schedule for the group</font><br>
<font color="#8b0000">189 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">@schedule</font>;<br>
<font color="#8b0000">190 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<font color="#8b0000">191 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">The schedule:</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">192 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$group</font>&nbsp;= Games::Tournament::RoundRobin-&gt;<font color="#8b0000">new</font>(<br>
<font color="#8b0000">193 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">league </font>=&gt; <font color="#008080">\@members</font><br>
<font color="#8b0000">194 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>
<font color="#8b0000">195 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">for</font>&nbsp;(<font color="#8b0000">my</font>&nbsp;<font color="#008080">$i</font>&nbsp;= <font color="#c00000">1</font>; <font color="#008080">$i</font>&nbsp;&lt;= <font color="#008080">$group</font>-&gt;rounds(); <font color="#008080">$i</font>++) {<br>
<font color="#8b0000">196 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">%round</font>;<br>
<font color="#8b0000">197 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">%raw_schedule</font>&nbsp;= %{ <font color="#008080">$group</font>-&gt;membersInRound(<font color="#008080">$i</font>) };<br>
<font color="#8b0000">198 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Round </font><font color="#008080">$i</font><font color="#c00000">.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">199 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">%parsed_values</font>;<br>
<font color="#8b0000">200 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">foreach</font>&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$member</font>&nbsp;(<font color="#8b0000">keys</font>&nbsp;<font color="#008080">%raw_schedule</font>) {<br>
<font color="#8b0000">201 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">next</font>&nbsp;<font color="#8b0000">if</font>&nbsp;<font color="#008080">$member</font>&nbsp;<font color="#8b0000">eq</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Bye</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">202 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">next</font>&nbsp;<font color="#8b0000">if</font>&nbsp;<font color="#008080">$raw_schedule</font>{<font color="#008080">$member</font>} <font color="#8b0000">eq</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Bye</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">203 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">next</font>&nbsp;<font color="#8b0000">if</font>&nbsp;<font color="#008080">$parsed_values</font>{<font color="#008080">$member</font>};<br>
<font color="#8b0000">204 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$round</font>{<font color="#008080">$member</font>} = <font color="#008080">$raw_schedule</font>{<font color="#008080">$member</font>};<br>
<font color="#8b0000">205 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$parsed_values</font>{<font color="#008080">$round</font>{<font color="#008080">$member</font>}} = <font color="#c00000">1</font>;<br>
<font color="#8b0000">206 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">207 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">push</font>(<font color="#008080">@schedule</font>, <font color="#008080">\%round</font>);<br>
<font color="#8b0000">208 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#008080">@schedule</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">209 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">210 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">211 </font><br>
<font color="#8b0000">212 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># process the schedule and create the necessary files</font><br>
<font color="#8b0000">213 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<font color="#8b0000">214 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>(<font color="#008080">$gamecnt</font>, <font color="#008080">$appendcnt</font>);<br>
<font color="#8b0000">215 </font><br>
<font color="#8b0000">216 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">for</font>&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$round</font>&nbsp;(<font color="#008080">@schedule</font>) {<br>
<font color="#8b0000">217 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$roundcnt</font>++;<br>
<font color="#8b0000">218 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">for</font>&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$member</font>&nbsp;(<font color="#8b0000">keys</font>&nbsp;%{ <font color="#008080">$round</font>&nbsp;}) {<br>
<font color="#8b0000">219 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$id</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <font color="#008080">$groupfnr</font>&nbsp;. ++<font color="#008080">$gamecnt</font>;<br>
<font color="#8b0000">220 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$table</font>&nbsp;&nbsp; = <font color="#8b0000">shift</font>&nbsp;<font color="#008080">@tables</font>;<br>
<font color="#8b0000">221 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$member1</font>&nbsp;= <font color="#008080">$member</font>;<br>
<font color="#8b0000">222 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$member2</font>&nbsp;= <font color="#008080">$round</font>-&gt;{<font color="#008080">$member</font>};<br>
<font color="#8b0000">223 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$gamefile</font>&nbsp;= <font color="#8b0000">sprintf</font>(<font color="#c00000">&quot;</font><font color="#c00000">%02d.s</font><font color="#c00000">&quot;</font>, <font color="#008080">$gamecnt</font>);<br>
<font color="#8b0000">224 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">push</font>(<font color="#008080">@tables</font>, <font color="#008080">$table</font>);<br>
<font color="#8b0000">225 </font><br>
<font color="#8b0000">226 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># create the gamefile</font><br>
<font color="#8b0000">227 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">open</font>(<font color="#008080">GAMEFILE</font>, <font color="#c00000">&quot;</font><font color="#c00000">&gt;</font><font color="#c00000">&quot;</font>, <font color="#008080">$gamefile</font>)<br>
<font color="#8b0000">228 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't open </font><font color="#008080">$gamefile</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">229 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">print</font>&nbsp;<font color="#008080">GAMEFILE</font>&nbsp;<font color="#c00000">&quot;</font><font color="#008080">$member</font><font color="#c00000">&nbsp;| </font><font color="#008080">$round</font><font color="#c00000">-&gt;{</font><font color="#008080">$member</font><font color="#c00000">}</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">230 </font><br>
<font color="#8b0000">231 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># append to the print file</font><br>
<font color="#8b0000">232 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">write</font>&nbsp;<font color="#008080">GAMEPRINT</font>;<br>
<font color="#8b0000">233 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$appendcnt</font>++;<br>
<font color="#8b0000">234 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">if</font>&nbsp;(<font color="#008080">$appendcnt</font>&nbsp;== <font color="#008080">$gamesheets</font>) {<br>
<font color="#8b0000">235 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">print</font>&nbsp;<font color="#008080">GAMEPRINT</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>&nbsp;x <font color="#008080">$newlines</font>;<br>
<font color="#8b0000">236 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$appendcnt</font>&nbsp;= <font color="#c00000">0</font>;<br>
<font color="#8b0000">237 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">238 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">239 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">240 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">241 </font><br>
<font color="#8b0000">242 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># print out or do something else</font><br>
<font color="#8b0000">243 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">unless</font>&nbsp;(<font color="#8b0000">defined</font>&nbsp;<font color="#008080">$options</font>-&gt;{s}) {<br>
<font color="#8b0000">244 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$printer</font>-&gt;printFile(<font color="#008080">$printfile</font>, <font color="#008080">$printfile</font>)<br>
<font color="#8b0000">245 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't print out: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">246 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">unlink</font>&nbsp;<font color="#008080">$printfile</font><br>
<font color="#8b0000">247 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">warn</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't remove </font><font color="#008080">$printfile</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">248 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">249 </font><br>
<font color="#8b0000">250 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">chdir</font>&nbsp;<font color="#008080">$cwd</font><br>
<font color="#8b0000">251 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't change into </font><font color="#008080">$cwd</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">252 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Back in </font><font color="#008080">$cwd</font><font color="#c00000">.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">253 </font>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">254 </font>&nbsp;&nbsp;&nbsp;&nbsp;INFO&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Created the schedule.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">255 </font>}<br>
<font color="#8b0000">256 </font><br>
<font color="#8b0000">257 </font><font color="#0000c0"># the subroutine invoked if the option -a is defined</font><br>
<font color="#8b0000">258 </font><font color="#0000c0"># But it just preprocesses and gives the the files directly to the</font><br>
<font color="#8b0000">259 </font><font color="#0000c0"># true processing subroutine.</font><br>
<font color="#8b0000">260 </font><font color="#8b0000">sub</font><font color="#008080">&nbsp;</font><font color="#008080">preprocess_game_files</font><font color="#008080">&nbsp;</font>{<br>
<font color="#8b0000">261 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$etcpath</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">262 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$options</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">263 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$file_containing</font>&nbsp;= <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">264 </font><br>
<font color="#8b0000">265 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># process the input and filtering out just the game files to</font><br>
<font color="#8b0000">266 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># give to the following routine</font><br>
<font color="#8b0000">267 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">if</font>&nbsp;(<font color="#8b0000">-d</font>&nbsp;<font color="#008080">$file_containing</font>-&gt;[<font color="#c00000">0</font>]) {<br>
<font color="#8b0000">268 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">We have a directory with game files given.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">269 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$dirname</font>&nbsp;= <font color="#008080">$file_containing</font>-&gt;[<font color="#c00000">0</font>];<br>
<font color="#8b0000">270 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">opendir</font>(<font color="#008080">GROUPDIR</font>, <font color="#008080">$file_containing</font>-&gt;[<font color="#c00000">0</font>])<br>
<font color="#8b0000">271 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't open </font><font color="#008080">$file_containing</font><font color="#c00000">-&gt;[0]: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">272 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">@$file_containing</font>&nbsp;= <font color="#8b0000">readdir</font>&nbsp;<font color="#008080">GROUPDIR</font>;<br>
<font color="#8b0000">273 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">close</font>&nbsp;<font color="#008080">GROUPDIR</font>;<br>
<font color="#8b0000">274 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">chdir</font>&nbsp;<font color="#008080">$dirname</font><br>
<font color="#8b0000">275 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't change into </font><font color="#008080">$dirname</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">276 </font>&nbsp;&nbsp;&nbsp;&nbsp;} <font color="#8b0000">else</font>&nbsp;{<br>
<font color="#8b0000">277 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">We have a list of game files given.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">278 </font>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">279 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">@gamefiles</font>&nbsp;= <font color="#8b0000">grep</font>&nbsp;{ <font color="#8b0000">/</font><font color="#c000c0">.</font><font color="#c00000">s$</font><font color="#8b0000">/</font>&nbsp;} <font color="#008080">@$file_containing</font>;<br>
<font color="#8b0000">280 </font>&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Giving game files </font><font color="#008080">@gamefiles</font><font color="#c00000">&nbsp;to the game file processor.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">281 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">&amp;process_game_files</font>(<font color="#008080">$etcpath</font>, <font color="#008080">$options</font>, <font color="#008080">\@gamefiles</font>);<br>
<font color="#8b0000">282 </font>}<br>
<font color="#8b0000">283 </font><br>
<font color="#8b0000">284 </font><font color="#0000c0"># process the game files</font><br>
<font color="#8b0000">285 </font><font color="#8b0000">sub</font><font color="#008080">&nbsp;</font><font color="#008080">process_game_files</font><font color="#008080">&nbsp;</font>{<br>
<font color="#8b0000">286 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$etcpath</font>&nbsp;&nbsp; = <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">287 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$options</font>&nbsp;&nbsp; = <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">288 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$gamefiles</font>&nbsp;= <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">289 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">%players</font>;<br>
<font color="#8b0000">290 </font><br>
<font color="#8b0000">291 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># process the game file and create the data structure</font><br>
<font color="#8b0000">292 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">for</font>&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$gamefile</font>&nbsp;(<font color="#008080">@$gamefiles</font>) {<br>
<font color="#8b0000">293 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">open</font>(<font color="#008080">GAMEFILE</font>, <font color="#008080">$gamefile</font>)<br>
<font color="#8b0000">294 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't open game file </font><font color="#008080">$gamefile</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">295 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>(<font color="#008080">$name1</font>, <font color="#008080">$name2</font>);<br>
<font color="#8b0000">296 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$numcont</font>;<br>
<font color="#8b0000">297 </font><br>
<font color="#8b0000">298 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">while</font>&nbsp;(<font color="#008080">&lt;GAMEFILE&gt;</font>) {<br>
<font color="#8b0000">299 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">chomp</font>;<br>
<font color="#8b0000">300 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">next</font>&nbsp;<font color="#8b0000">if</font><font color="#8b0000">&nbsp;/</font><font color="#c00000">#</font><font color="#8b0000">/</font>;<br>
<font color="#8b0000">301 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">if</font>&nbsp;(<font color="#8b0000">/</font><font color="#c000c0">(.+)</font><font color="#c00000">&nbsp;</font><font color="#c000c0">\|</font><font color="#c00000">&nbsp;</font><font color="#c000c0">(.+)</font><font color="#8b0000">/</font>) {<br>
<font color="#8b0000">302 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<font color="#008080">$name1</font>, <font color="#008080">$name2</font>) = (<font color="#008080">$1</font>, <font color="#008080">$2</font>);<br>
<font color="#8b0000">303 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">The players are </font><font color="#008080">$name1</font><font color="#c00000">&nbsp;and </font><font color="#008080">$name2</font><font color="#c00000">.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">304 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#008080">$numcont</font>&nbsp;= <font color="#c00000">0</font>;<br>
<font color="#8b0000">305 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <font color="#8b0000">else</font>&nbsp;{<br>
<font color="#8b0000">306 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{balls}, <font color="#008080">$players</font>{<font color="#008080">$name2</font>}{balls})<br>
<font color="#8b0000">307 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <font color="#8b0000">/</font><font color="#c000c0">(</font><font color="#c000c0">\d</font><font color="#c000c0">+)</font><font color="#c000c0">\D</font><font color="#c000c0">+(</font><font color="#c000c0">\d</font><font color="#c000c0">+)</font><font color="#8b0000">/</font>;<br>
<font color="#8b0000">308 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Result: </font><font color="#008080">$1</font><font color="#c00000">&nbsp;: </font><font color="#008080">$2</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">309 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$numcont</font>&nbsp;= <font color="#c00000">1</font>;<br>
<font color="#8b0000">310 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">311 </font><br>
<font color="#8b0000">312 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{all_fails} += <font color="#008080">$players</font>{<font color="#008080">$name2</font>}{balls},<br>
<font color="#8b0000">313 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{all_fails} += <font color="#008080">$players</font>{<font color="#008080">$name1</font>}{balls},<br>
<font color="#8b0000">314 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{all_balls} += <font color="#008080">$players</font>{<font color="#008080">$name1</font>}{balls},<br>
<font color="#8b0000">315 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{all_balls} += <font color="#008080">$players</font>{<font color="#008080">$name2</font>}{balls},<br>
<font color="#8b0000">316 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{ball_difference} +=<br>
<font color="#8b0000">317 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{balls} - <font color="#008080">$players</font>{<font color="#008080">$name2</font>}{balls}),<br>
<font color="#8b0000">318 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{ball_difference} +=<br>
<font color="#8b0000">319 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{balls} - <font color="#008080">$players</font>{<font color="#008080">$name1</font>}{balls}),<br>
<font color="#8b0000">320 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">if</font>&nbsp;<font color="#008080">$numcont</font>;<br>
<font color="#8b0000">321 </font><br>
<font color="#8b0000">322 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">if</font>&nbsp;(<font color="#008080">$numcont</font>&nbsp;<font color="#8b0000">and</font><br>
<font color="#8b0000">323 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{balls} &gt; <font color="#008080">$players</font>{<font color="#008080">$name2</font>}{balls}) {<br>
<font color="#8b0000">324 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{sets_won}++;<br>
<font color="#8b0000">325 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{all_sets_won}++;<br>
<font color="#8b0000">326 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{sets_lost}++;<br>
<font color="#8b0000">327 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{all_sets_lost}++;<br>
<font color="#8b0000">328 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <font color="#8b0000">elsif</font>&nbsp;(<font color="#008080">$numcont</font>) {<br>
<font color="#8b0000">329 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{sets_won}++;<br>
<font color="#8b0000">330 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{all_sets_won}++;<br>
<font color="#8b0000">331 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{sets_lost}++;<br>
<font color="#8b0000">332 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{all_sets_lost}++;<br>
<font color="#8b0000">333 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">334 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{balls} = <font color="#c00000">0</font>; <font color="#0000c0"># Just for this game</font><br>
<font color="#8b0000">335 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{balls} = <font color="#c00000">0</font>; <font color="#0000c0">#</font><br>
<font color="#8b0000">336 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">337 </font><br>
<font color="#8b0000">338 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">if</font>&nbsp;(<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{sets_won}<br>
<font color="#8b0000">339 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt; <font color="#008080">$players</font>{<font color="#008080">$name2</font>}{sets_won}) {<br>
<font color="#8b0000">340 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{wins}++;<br>
<font color="#8b0000">341 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{losts}++;<br>
<font color="#8b0000">342 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <font color="#8b0000">else</font>&nbsp;{<br>
<font color="#8b0000">343 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{wins}++;<br>
<font color="#8b0000">344 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{losts}++;<br>
<font color="#8b0000">345 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">346 </font><br>
<font color="#8b0000">347 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{set_difference} +=<br>
<font color="#8b0000">348 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{sets_won} - <font color="#008080">$players</font>{<font color="#008080">$name2</font>}{sets_won});<br>
<font color="#8b0000">349 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{set_difference} +=<br>
<font color="#8b0000">350 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{sets_won} - <font color="#008080">$players</font>{<font color="#008080">$name1</font>}{sets_won});<br>
<font color="#8b0000">351 </font><br>
<font color="#8b0000">352 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name1</font>}{sets_won} = <font color="#c00000">0</font>; <font color="#0000c0"># Just for this game.</font><br>
<font color="#8b0000">353 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$name2</font>}{sets_won} = <font color="#c00000">0</font>; <font color="#0000c0">#</font><br>
<font color="#8b0000">354 </font>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">355 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># I know, this whole thing is very very ugly. But how ugly</font><br>
<font color="#8b0000">356 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># would it be&nbsp;&nbsp;if there were no hashes? On top of that it</font><br>
<font color="#8b0000">357 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># produces occasional warnings. But I think, if it</font><br>
<font color="#8b0000">358 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># wouldn't produce occasional warnings, it would also be</font><br>
<font color="#8b0000">359 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># far more ugly.</font><br>
<font color="#8b0000">360 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">close</font>&nbsp;<font color="#008080">GAMEFILE</font>;<br>
<font color="#8b0000">361 </font>&nbsp;&nbsp;&nbsp;&nbsp;INFO&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Processed the game files.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">362 </font><br>
<font color="#8b0000">363 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># sort the people according to their games</font><br>
<font color="#8b0000">364 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">@ranking</font>&nbsp;= <font color="#8b0000">sort</font>&nbsp;{<br>
<font color="#8b0000">365 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$b</font>}{wins}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;=&gt; <font color="#008080">$players</font>{<font color="#008080">$a</font>}{wins}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#8b0000">or</font><br>
<font color="#8b0000">366 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$a</font>}{losts}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;=&gt; <font color="#008080">$players</font>{<font color="#008080">$b</font>}{losts}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font><br>
<font color="#8b0000">367 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$b</font>}{set_difference} &lt;=&gt; <font color="#008080">$players</font>{<font color="#008080">$a</font>}{set_difference} <font color="#8b0000">or</font><br>
<font color="#8b0000">368 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$b</font>}{ball_difference} &lt;=&gt; <font color="#008080">$players</font>{<font color="#008080">$a</font>}{ball_difference}<br>
<font color="#8b0000">369 </font>&nbsp;&nbsp;&nbsp;&nbsp;} <font color="#8b0000">keys</font>&nbsp;<font color="#008080">%players</font>;<br>
<font color="#8b0000">370 </font>&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Sorted all the stuff.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">371 </font>&nbsp;&nbsp;&nbsp;&nbsp;<br>
<font color="#8b0000">372 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># generate the ranking file</font><br>
<font color="#8b0000">373 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">open</font>(<font color="#008080">RANKING</font>, <font color="#c00000">&quot;</font><font color="#c00000">&gt;</font><font color="#c00000">&quot;</font>, <font color="#c00000">&quot;</font><font color="#c00000">ranking</font><font color="#c00000">&quot;</font>)<br>
<font color="#8b0000">374 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't open </font><font color="#c000c0">\&quot;</font><font color="#c00000">ranking</font><font color="#c000c0">\&quot;</font><font color="#c00000">&nbsp;for writing: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">375 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">printf</font>&nbsp;<font color="#008080">RANKING</font>&nbsp;(<font color="#c00000">&quot;</font><font color="#c00000">%4s %-21s</font><font color="#c000c0">\t</font><font color="#c00000">%-11s</font><font color="#c000c0">\t</font><font color="#c00000">%-11s</font><font color="#c000c0">\t</font><font color="#c00000">%-5s</font><font color="#c000c0">\t</font><font color="#c00000">%-11s</font><font color="#c000c0">\t</font><font color="#c00000">%-5s</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>,<br>
<font color="#8b0000">376 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Rank</font><font color="#c00000">&quot;</font>, <font color="#c00000">&quot;</font><font color="#c00000">Name</font><font color="#c00000">&quot;</font>, <font color="#c00000">&quot;</font><font color="#c00000">Games</font><font color="#c00000">&quot;</font>, <font color="#c00000">&quot;</font><font color="#c00000">Sets</font><font color="#c00000">&quot;</font>, <font color="#c00000">&quot;</font><font color="#c00000">SD</font><font color="#c00000">&quot;</font>, <font color="#c00000">&quot;</font><font color="#c00000">Balls</font><font color="#c00000">&quot;</font>, <font color="#c00000">&quot;</font><font color="#c00000">BD</font><font color="#c00000">&quot;</font>);<br>
<font color="#8b0000">377 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$rank</font>;<br>
<font color="#8b0000">378 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">foreach</font>&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$player</font>&nbsp;(<font color="#008080">@ranking</font>) {<br>
<font color="#8b0000">379 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">printf</font>&nbsp;<font color="#008080">RANKING</font>&nbsp;(<br>
<font color="#8b0000">380 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">%3d. %-21s</font><font color="#c000c0">\t</font><font color="#c00000">%4d : %4d</font><font color="#c000c0">\t</font><font color="#c00000">%4s : %4s</font><font color="#c000c0">\t</font><font color="#c00000">%5s</font><font color="#c000c0">\t</font><font color="#c00000">&quot;</font><br>
<font color="#8b0000">381 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. <font color="#c00000">&quot;</font><font color="#c00000">%4s : %4s</font><font color="#c000c0">\t</font><font color="#c00000">%5s</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>,<br>
<font color="#8b0000">382 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++<font color="#008080">$rank</font>, <font color="#008080">$player</font>,<br>
<font color="#8b0000">383 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$player</font>}{wins}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <font color="#c00000">0</font>,<br>
<font color="#8b0000">384 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$player</font>}{losts}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; || <font color="#c00000">0</font>,<br>
<font color="#8b0000">385 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$player</font>}{all_sets_won}&nbsp;&nbsp;&nbsp;&nbsp;|| <font color="#c00000">0</font>,<br>
<font color="#8b0000">386 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$player</font>}{all_sets_lost}&nbsp;&nbsp; || <font color="#c00000">0</font>,<br>
<font color="#8b0000">387 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$player</font>}{set_difference}&nbsp;&nbsp;|| <font color="#c00000">0</font>,<br>
<font color="#8b0000">388 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$player</font>}{all_balls}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; || <font color="#c00000">0</font>,<br>
<font color="#8b0000">389 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$player</font>}{all_fails}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; || <font color="#c00000">0</font>,<br>
<font color="#8b0000">390 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008080">$players</font>{<font color="#008080">$player</font>}{ball_difference} || <font color="#c00000">0</font>,<br>
<font color="#8b0000">391 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>
<font color="#8b0000">392 </font>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">393 </font>&nbsp;&nbsp;&nbsp;&nbsp;INFO&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Generated the ranking file.</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">394 </font>}<br>
<font color="#8b0000">395 </font><br>
<font color="#8b0000">396 </font><br>
<font color="#8b0000">397 </font><font color="#0000c0"># the subroutine for creating the group files</font><br>
<font color="#8b0000">398 </font><font color="#8b0000">sub</font><font color="#008080">&nbsp;</font><font color="#008080">create_groupfiles</font><font color="#008080">&nbsp;</font>{<br>
<font color="#8b0000">399 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$etcpath</font>&nbsp;&nbsp;&nbsp;&nbsp; = <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">400 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$groupfnames</font>&nbsp;= <font color="#8b0000">shift</font>;<br>
<font color="#8b0000">401 </font><br>
<font color="#8b0000">402 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000c0"># write the template to all the group files</font><br>
<font color="#8b0000">403 </font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">foreach</font>&nbsp;<font color="#8b0000">my</font>&nbsp;<font color="#008080">$groupfname</font>&nbsp;(<font color="#008080">@$groupfnames</font>) {<br>
<font color="#8b0000">404 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">open</font>(<font color="#008080">GROUPFILE</font>, <font color="#c00000">&quot;</font><font color="#c00000">&gt;</font><font color="#c00000">&quot;</font>, <font color="#008080">$groupfname</font>)<br>
<font color="#8b0000">405 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">or</font>&nbsp;<font color="#8b0000">die</font>&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Couldn't open </font><font color="#008080">$groupfname</font><font color="#c00000">: </font><font color="#008080">$!</font><font color="#c000c0">\n</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">406 </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#8b0000">print</font>&nbsp;<font color="#008080">GROUPFILE</font>&nbsp;<font color="#c00000">&lt;&lt;&quot;EOF&quot;</font><font color="#c00000">;</font><br>
<font color="#8b0000">407 </font><font color="#c00000">Name:</font><br>
<font color="#8b0000">408 </font><font color="#c00000">Tables:</font><br>
<font color="#8b0000">409 </font><font color="#c00000">Members:</font><br>
<font color="#8b0000">410 </font><br>
<font color="#8b0000">411 </font><font color="#c00000">EOF</font><br>
<font color="#8b0000">412 </font>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<font color="#8b0000">413 </font>&nbsp;&nbsp;&nbsp;&nbsp;DEBUG&nbsp;<font color="#c00000">&quot;</font><font color="#c00000">Wrote template to group files: </font><font color="#008080">@$groupfnames</font><font color="#c00000">&quot;</font>;<br>
<font color="#8b0000">414 </font>}<br>
<font color="#8b0000">415 </font><br>
<font color="#8b0000">416 </font><font color="#0000c0">__END__</font><br>
</font></body>
</html>
